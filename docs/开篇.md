## 前端工程化痛点：

- **模块化需求** ， 在 ESM、CommonJS、AMD、CMD 多种模块规范情况下，兼容不同的模块规范，适应不同的执行环境；保证各种模块正常加载
- **兼容浏览器，编译高级语法**， 浏览器的实现规范限制，TypeScript、JSX、esnext 等不被浏览器正常运行，需要转换成浏览器支持的语法
- **线上代码质量** ，生产环境下，需要考虑代码`安全性`、`兼容性`保证线上代码的正常运行，也需要考虑代码运行时的性能。
- **开发效率**，**项目冷启动/二次启动事件、热更新**。加快卡法效率

## 解决方法：

- **模块化方案** ：
  - 提供模块加载方案
  - 并兼容不同的模块规范
- **浏览器兼容、编译高级语法** ：

  - 高级预估转译，配合 Sass、TSC、Babel 等前端工具链，完成高级语法的转译功能
  - 资源加载对静态资源进行处理，使之能作为一个模块正常加载。如图片、字体、worker

- **线上代码质量**

  - 使用他所工具进行代码压缩和混淆
  - `tree-shaking` 删除未使用代码
  - 语法降级

- **开发效率**
  - HMR
  - 构建提速

## 为什么 Vite 是当前最高效的构建工具？

通过四个维度来审视：

### 开发效率

传统构建工具普遍的缺点就是太慢了

`Vite` 能将项目的启动性能提升一个量级，并且达到毫秒级的瞬间热更新效果。

例如`Webpack`在项目庞大的情况下项目启动速度慢，热更新速度也经常需要等待 10s 以上。原因：

- 项目冷启动必须递归打包整个项目依赖数
- JavaScript 语言本身的性能限制，导致构建性能遇到瓶颈，直接影响开发效率

其中最占用时间的就是**代码打包**和**文件编译**

`Vite`很好的解决上述问题：

- Vite 在开发阶段基于浏览器原生 ESM 的支持实现了`no-bundle`（what is this？ 不打包？）服务
- 借助`Esbuild`超快的编译速度来做第三方库和`TS/JSX`等语法的编译

### 模块化方面

Vite 基于浏览器原生 ESM 的支持实现模块加载，并且无论是开发环境还是生产环境，都可以将其他格式的产物(如 CommonJS)转换为 ESM。

### 语法转译

Vite 内置了对 TypeScript、JSX、Sass 等高级语法的支持，也能够加载各种各样的静态资源，如图片、Worker 等等

### 产物质量（代码打包）

基于`rollup`实现生产环境打包，同时可以配合 Terser、Babel 等工具链，可以极大程度保证构建产物的质量。

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/02910cd2c6894bcdb3a9e0fc9e59f4c2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp?) ![深入浅出 Vite (2).png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/52599ad0dbb344d59eafb00f360e99c3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp?)
